#

## key point
- Fetch API [MDN](https://developer.mozilla.org/zh-TW/docs/Web/API/Fetch_API/Using_Fetch)
- 正則表達式
- new RegExp [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp)
  - `'gi'`：這是正則表達式的修飾符（flags），可以影響正則表達式的匹配行為。
    - `g（global）`：表示全局匹配，意味著正則表達式將會搜索字符串中的所有匹配項，而不僅僅是找到的第一個匹配項。
    - `i（ignore case）`：表示忽略大小寫，在匹配時不會區分字母的大小寫。

- String.prototype.replace() [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace)

- String.prototype.match() [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match)

- String.prototype.includes() [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes)



## 步驟拆解
### 功能
- 取回遠端API的城市data
- 關鍵字搜尋功能
- 搜尋結果畫面渲染
- 數字千分位置符號

### 互動
- 綁定事件：change, keyup
- 事件功能: 
  - 將關鍵字進行搜尋取得符合結果的陣列
  - 結果渲染到畫面

## `match` 與 `includes` 比較

| 特性          | `match`                                    | `includes`                           |
|---------------|--------------------------------------------|--------------------------------------|
| **定義**      | 使用正則表達式測試字符串                    | 檢查一個字符串是否包含另一個字符串    |
| **返回值**    | 匹配的結果或 `null`                        | 布林值 `true` 或 `false`            |
| **用法**      | 需要傳入正則表達式作為參數                  | 需要傳入要檢查的子字符串作為參數    |
| **功能**      | 支持正則表達式功能（全局匹配、忽略大小寫等）| 僅支持簡單的子字符串檢查            |
| **性能**      | 可能較慢，因為需要解析正則表達式           | 通常較快，只需檢查是否存在子字符串  |
| **使用場景**  | 複雜的字符串模式匹配                        | 簡單的子字符串存在檢查              |


## 正則表達式（Regular Expressions，簡稱 regex）
正則表達式（Regular Expressions，簡稱 regex）是一種強大的文本處理工具，用於匹配、搜尋和替換字符串中的特定模式。它們在code、數據驗證、文本解析等領域非常常用。以下是正則表達式的基本運作方式和常見元素的解說：

### 1. 基本概念
- **模式（Pattern）**：正則表達式定義的字符串格式或模式，用於匹配特定的字符串。
- **匹配（Matching）**：檢查字符串是否符合正則表達式定義的模式。

### 2. 正則表達式的組成
正則表達式通常由以下幾個部分組成：

- **普通字符**：例如字母和數字，表示它們本身。
  
- **特殊字符**：具有特定含義的字符：
  - `.`：匹配任何單個字符（除了換行符）。
  - `^`：匹配輸入字符串的開始。
  - `$`：匹配輸入字符串的結束。
  - `*`：匹配前面的元素零次或多次。
  - `+`：匹配前面的元素一次或多次。
  - `?`：匹配前面的元素零次或一次。
  - `{n}`：精確匹配前面的元素 n 次。
  - `{n,}`：匹配前面的元素至少 n 次。
  - `{n,m}`：匹配前面的元素至少 n 次，但不超過 m 次。

- **字符類**：用方括號 `[]` 圍住的字符集合，表示可以匹配方括號內的任意一個字符。

- **轉義字符**：使用反斜杠 `\` 轉義特殊字符，以匹配它們的字面值。

- **分組和捕獲**：使用圓括號 `()` 將部分模式分組。

### 3. 修飾符（Flags）
修飾符用於改變正則表達式的匹配方式：
- `g`：全局匹配，查找所有匹配項，而不僅僅是第一個。
- `i`：忽略大小寫，進行不區分大小寫的匹配。
- `m`：多行模式，影響 `^` 和 `$` 的行為，使其匹配每一行的開頭和結尾。

### 4. 正則表達式的運作
1. **編譯**：正則表達式被編譯為一種模式，可以在字符串中進行匹配。
2. **匹配**：使用 `test()` 方法檢查字符串是否匹配，或使用 `exec()` 方法獲取匹配的詳細信息。
3. **替換和分割**：可以使用 `replace()` 方法替換匹配的部分，或使用 `split()` 方法根據正則表達式分割字符串。

### 5. 案例：數字千分號
在這個示例中，我們的目的是在一個數字中插入逗號作為千位分隔符。

```javascript

function numberWithCommas(origin) {
    return origin.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

```

####  **`\B`**
- `\B` 表示非單詞邊界。這意味著在插入逗號的位置，必須確保不在字符串的開頭。這樣可以避免在數字的最前面插入不必要的逗號。

#### **`(?=(\d{3})+`**
- 這部分使用正向前瞻（positive lookahead），意思是我們在檢查當前的位置後面是否有三位數字的組合。
- **`(\d{3})+`**：這個表示我們在尋找一組或多組的三位數字。
  - `\d` 是數字的意思（0-9）。
  - `{3}` 表示剛好匹配三個數字。
  - `+` 讓我們能匹配一個或多組這樣的三位數字。

#### **`(?!\d)`**
- 這部分是負向前瞻（negative lookahead），用來確保在我們找到的三位數字後面不會再有其他數字。這樣可以保證我們只在千位的邊界插入逗號，而不會在數字的結尾處插入。

#### **`g` 修飾符**
- `g` 修飾符表示全局匹配，這意味著正則表達式將在整個字符串中尋找所有符合條件的匹配，而不僅僅是第一個。

### 小結
這段正則表達式的目的是在數字中每三位插入一個逗號，以提高數字的可讀性。它通過確定在數字邊界處的正確位置來進行插入，並使用正則表達式的前瞻和後顧功能來達到目的。這種方法非常高效，適合處理各種長度的數字字符串。


### 總結
正則表達式是一個靈活且強大的工具，可以高效地處理字符串。了解其基本構造和運作方式將幫助你在編程中進行更複雜的文本處理和數據驗證。
