# 14 - Object and Arrays - Reference VS Copy

## 內容
值的拷貝，特別是物件與陣列

## 重點

### 基本資料類型（字串、數字、布林值）
當我們處理像字串、數字和布林值這些基本資料類型時，當你把它們「拷貝」給另一個變數時，實際上是創造了一個全新的值。這就像是複製了一張紙，一張改變了，另一張還是保持原樣。

- **改變一個值**，不會影響原本的。
- 它們是完全獨立的，互不干涉。

---

### 陣列（Array）
陣列是不同的。當你把一個陣列拷貝給另一個變數時，並不是創造了一個新的陣列，而是讓兩個變數指向同一個陣列。這意味著，當你改變其中一個陣列時，另一個也會跟著變，因為它們共用同一份資料。就像兩個人共用同一張紙，任何一個人寫字，另一個人都會看到。

**如何正確地拷貝陣列**：
- **`slice()` - 陣列的淺拷貝** : 用來製作陣列的淺層拷貝。它會返回一個新的陣列，包含原來陣列的元素。
- **`concat()` - 陣列的淺拷貝** : 將一個或多個陣列合併，並返回一個新的陣列。這也可以用來製作原陣列的拷貝。
- **展開運算符（`...`） - 陣列與物件的淺拷貝** : 用於製作陣列或物件的淺層拷貝。當用在陣列或物件中，它會把其中的元素或屬性展開，生成一個新的拷貝。
- **`Array.from()` - 陣列的淺拷貝** : 用來從一個類陣列對象或可迭代對象創建一個新的陣列，這樣你就可以製作一個新的陣列拷貝。

---

### 物件（Object）
物件和陣列類似，當你把一個物件拷貝給另一個變數時，兩個變數其實指向的是同一個物件。所以，改變其中一個物件的屬性，另一個也會跟著改變。

#### 淺層拷貝
- **`Object.assign()`**：將一個或多個物件的屬性複製到一個目標物件中，並返回這個目標物件。這是一種製作物件淺層拷貝的方法。

#### 深層拷貝
當陣列或物件裡面還有其他物件或陣列時，只用一般的拷貝方法會導致只有最外層被拷貝，裡面的資料仍然是共用的。這時候，就需要「深層拷貝」，它會拷貝所有層次的資料。雖然可以做到，但通常不建議這麼做，因為這樣會比較複雜和耗費資源。
- **`JSON.parse(JSON.stringify())`** :將物件或陣列轉換為字串，再從字串解析回來，這樣可以製作一個「深層拷貝」。適合處理包含多層結構的物件或陣列，因為這樣能確保每一層都被完整複製。

### 使用場合：
- **淺拷貝**（如 `slice()`、`concat()`、展開運算符、`Array.from()`、`Object.assign()`）：用來拷貝只有單層資料的陣列或物件，適合大多數情況。
- **深拷貝**（如 `JSON.parse(JSON.stringify())`）：用於複製包含多層資料的物件或陣列，當你不想讓任何嵌套的層級被共享時使用。

---
### 結論：
- 基本資料類型是「獨立」的，改變一個不會影響另一個。
- 陣列和物件則是「共用」的，拷貝時需要特別小心。如果需要改變其中一個但不希望影響另一個，記得使用正確的拷貝方法！

